(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{5764:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return t(6601)}])},6601:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var i=t(7876),a=t(4232),d=t(7660),n=t(2727),l=t(2009),o=t(8534);function s(){let[e,r]=(0,a.useState)(null),[t,s]=(0,a.useState)(""),[c,x]=(0,a.useState)(""),[p,u]=(0,a.useState)("");a.useEffect(()=>{let e=(0,o.hg)(n.j2,r);return()=>e()},[]);let b=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),f=e=>e.length>=6,g=async()=>{if(u(""),!b(t))return void u("正しいメールアドレスを入力してください。");if(!f(c))return void u("パスワードは6文字以上で入力してください。");try{let e=await (0,o.x9)(n.j2,t,c);r(e.user)}catch(r){if(r&&"object"==typeof r&&"code"in r)if("auth/user-not-found"===r.code)u("ユーザーが見つかりません。新規登録してください。");else if("auth/wrong-password"===r.code)u("パスワードが間違っています。");else{var e;u("ログインエラー: "+(null!=(e=r.message)?e:""))}else u("ログインエラー: 不明なエラー")}},h=async()=>{if(u(""),!b(t))return void u("正しいメールアドレスを入力してください。");if(!f(c))return void u("パスワードは6文字以上で入力してください。");try{let e=(await (0,o.eJ)(n.j2,t,c)).user,i=(0,l.aU)();await (0,l.BN)((0,l.H9)(i,"users",e.uid),{email:e.email,role:"user"}),r(e)}catch(r){if(r&&"object"==typeof r&&"code"in r)if("auth/email-already-in-use"===r.code)u("このメールアドレスは既に登録されています。ログインしてください。");else{var e;u("登録エラー: "+(null!=(e=r.message)?e:""))}else u("登録エラー: 不明なエラー")}},m=(0,d.h)(e);if(e){var w;return(0,i.jsxs)("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"16px",display:"flex",alignItems:"center",width:"100%",minWidth:"420px",gap:"16px",whiteSpace:"nowrap",overflow:"auto"},children:[(0,i.jsx)("span",{style:{padding:"8px 16px",background:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px",display:"inline-block"},title:null!=(w=e.email)?w:"",children:e.email}),(0,i.jsx)("button",{onClick:()=>(0,o.CI)(n.j2),style:{border:"1px solid #ccc",borderRadius:"4px",padding:"8px 16px",background:"#fff",cursor:"pointer",whiteSpace:"nowrap"},children:"ログアウト"}),"admin"===m&&(0,i.jsx)("div",{style:{marginLeft:"16px",whiteSpace:"nowrap"},children:(0,i.jsx)("p",{style:{margin:0},children:"管理者専用"})})]})}return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",minHeight:"100px"},children:[(0,i.jsxs)("div",{style:{background:"rgba(255,255,255,0.8)",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"16px",display:"flex",flexDirection:"column",alignItems:"flex-end",width:"260px"},children:[(0,i.jsx)("input",{type:"email",placeholder:"メールアドレス",value:t,onChange:e=>s(e.target.value),style:{border:"1px solid #ccc",borderRadius:"4px",padding:"8px 16px",marginBottom:"8px",background:"rgba(255,255,255,0.7)",width:"100%",boxSizing:"border-box"}}),(0,i.jsx)("input",{type:"password",placeholder:"パスワード",value:c,onChange:e=>x(e.target.value),style:{border:"1px solid #ccc",borderRadius:"4px",padding:"8px 16px",marginBottom:"8px",background:"rgba(255,255,255,0.7)",width:"100%",boxSizing:"border-box"}}),(0,i.jsx)("button",{type:"button",style:{border:"1px solid #ccc",borderRadius:"4px",padding:"8px 16px",background:"#fff",flex:1,marginRight:"8px"},onClick:g,children:"ログイン"}),(0,i.jsx)("button",{style:{border:"1px solid #ccc",borderRadius:"4px",padding:"8px 16px",background:"#fff",cursor:"pointer",flex:1},onClick:h,children:"新規登録"})]}),p&&(0,i.jsx)("div",{style:{color:"red",marginTop:"8px",fontSize:"0.9em",width:"100%"},children:p})]})}function c(){return(0,i.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,i.jsxs)("div",{className:"container flex flex-col items-center justify-center bg-white/90 dark:bg-gray-800/90 rounded-3xl shadow-2xl p-8 gap-6 border border-blue-100 dark:border-gray-700 backdrop-blur",style:{width:"80vw",maxWidth:480},children:[(0,i.jsx)("h1",{className:"text-3xl font-extrabold text-blue-900 dark:text-blue-200 mb-6 text-center tracking-tight",children:"認証ページ"}),(0,i.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,i.jsx)(s,{})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(5764)),_N_E=e.O()}]);